<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indianapolis CO2 Dashboard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"></script>
    <style>
        body, html {
            height: 100%;
            overflow: hidden;
            background-color: #001E2B;
        }
        .chart-container {
            height: 100vh;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        .chart-container.active {
            opacity: 1;
        }
        .chart-content {
            background-color: #00ED64;
            color: #023430;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            width: 80%;
            max-width: 1000px;
            font-weight: bold;
        }   
        canvas {
            max-height: 60vh;
            background-color: #FFFFFF;
            color: 3D3D3D;
        }
        .navigation {
            position: fixed;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 1000;
        }
        .nav-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: #ccc;
            margin: 10px 0;
            cursor: pointer;
        }
        .nav-dot.active {
            background-color: #333;
        }
        iframe {
            width: 100%;
            height: 60vh;
            border: none;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="chart-container active" id="chart1">
            <div class="chart-content">
                <h2>Monthly CO2 Levels</h2>
                <canvas id="areaChart"></canvas> 
                <p>This chart shows the monthly average CO2 levels recorded at our main station in Indianapolis over the past year. We can observe seasonal variations and an overall increasing trend.</p>
            </div>
        </div>

        <div class="chart-container" id="chart2">
            <div class="chart-content">
                <h2>Power BI CO2 Dashboard</h2>
                <iframe title="test_climate_co2" src="https://app.powerbi.com/view?r=eyJrIjoiMTI4YTE5ZmEtYzdlMS00OTcyLWI3NDUtYmI3NTVlYTQ2MDc2IiwidCI6Ijg1NjAyOTA4LWUxNWItNDNiYS05MTQ4LTM4YmM3NzNhODE2ZSIsImMiOjl9" allowFullScreen="true"></iframe>
                <p>This Power BI dashboard provides an interactive view of CO2 data for Indianapolis. You can explore different aspects of the data using the embedded controls.</p>
            </div>
        </div>

        <div class="chart-container" id="chart3">
            <div class="chart-content">
                <h2>CO2 Levels</h2>
                <iframe title="test_climate_co2" src="https://app.powerbi.com/view?r=eyJrIjoiMTI4YTE5ZmEtYzdlMS00OTcyLWI3NDUtYmI3NTVlYTQ2MDc2IiwidCI6Ijg1NjAyOTA4LWUxNWItNDNiYS05MTQ4LTM4YmM3NzNhODE2ZSIsImMiOjl9" allowFullScreen="true"></iframe>
                <!--<canvas id="barChart"></canvas> -->
                <p>This Power BI dashboard provides an interactive view of CO2 data for Indianapolis. You can explore different aspects of the data using the embedded controls.</p>
            </div>
        </div>
    </div>

    <div class="navigation">
        <div class="nav-dot active" data-chart="chart1"></div>
        <div class="nav-dot" data-chart="chart2"></div>
        <div class="nav-dot" data-chart="chart3"></div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
        // Chart creation functions
        function createLineChart() {
            const ctx = document.getElementById('areaChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['2010', '2012', '2014', '2016', '2018', '2020', '2022', '2024'],
                    datasets: [{
                        label: 'CO2 Level (ppm)',
                        data: Array.from({length: 8}, () => Math.floor(Math.random() * (450 - 400 + 1)) + 400),
                        borderColor: '#F7A861',
                        backgroundColor: 'rgb(251, 214, 182, 0.5)',
                        fill: true,
                        tension: 0.1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                }
            });
        }

        function createBarChart() {
            const ctx = document.getElementById('barChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Downtown', 'Industrial Park', 'Residential Area', 'City Park', 'Suburbs'],
                    datasets: [{
                        label: 'Average CO2 Level (ppm)',
                        data: [450, 480, 420, 400, 430],
                        backgroundColor: 'rgba(75, 192, 192, 0.6)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
        }

        // Create charts
        createLineChart();
        //createBarChart();

        // Scroll handling
        let currentChart = 1;
        const charts = document.querySelectorAll('.chart-container');
        const navDots = document.querySelectorAll('.nav-dot');

        function showChart(chartNum) {
            charts.forEach((chart, index) => {
                chart.classList.toggle('active', index + 1 === chartNum);
            });
            navDots.forEach((dot, index) => {
                dot.classList.toggle('active', index + 1 === chartNum);
            });
            currentChart = chartNum;
        }

        window.addEventListener('wheel', (e) => {
            if (e.deltaY > 0 && currentChart < 3) {
                showChart(currentChart + 1);
            } else if (e.deltaY < 0 && currentChart > 1) {
                showChart(currentChart - 1);
            }
        });

        navDots.forEach(dot => {
            dot.addEventListener('click', () => {
                showChart(parseInt(dot.dataset.chart.slice(-1)));
            });
        });
    </script>
</body>
</html>